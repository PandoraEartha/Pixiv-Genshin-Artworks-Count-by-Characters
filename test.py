import requests
import re
import os
import json
import time
import sys

# headerPixiv={
#     "referer": "https://www.pixiv.net/",
#     "user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36",
#     "Cookie":"first_visit_datetime_pc=2022-04-21+21%3A59%3A53; p_ab_id=2; p_ab_id_2=7; p_ab_d_id=1842444583; yuid_b=FySVNwc; privacy_policy_notification=0; a_type=0; b_type=2; d_type=2%2C7; __utmz=235335808.1651201096.3.2.utmcsr=accounts.pixiv.net|utmccn=(referral)|utmcmd=referral|utmcct=/; adr_id=cjO2ju2ewoo0NLhc9kDcZeLKmDduE7nyTgOaIQBFZG4E2x6L; _fbp=fb.1.1660357876912.861275933; _ga_MZ1NL4PHH0=GS1.1.1666053998.1.1.1666054034.0.0.0; PHPSESSID=80164478_TZHvglAz43qxkDQ50hPnPURQRMwSVQoO; c_type=21; privacy_policy_agreement=0; login_ever=yes; _gcl_au=1.1.759482793.1673773145; __utmv=235335808.|2=login%20ever=yes=1^3=plan=normal=1^5=gender=female=1^6=user_id=80164478=1^9=p_ab_id=2=1^10=p_ab_id_2=7=1^11=lang=zh=1; tag_view_ranking=_EOd7bsGyl~OUF2gvwPef~ziiAzr_h04~VRuBtwFc6O~DlTwYHcEzf~Lt-oEicbBr~VLDgZNuX1x~MnGbHeuS94~pzZvureUki~CiSfl_AE0h~azESOjmQSV~gCB7z_XWkp~b_rY80S-DW~eVxus64GZU~TqiZfKmSCg~MhuNMsFpmN~Ie2c51_4Sp~Nx1CukYg8-~ptbDpN0XQz~d2oWv_4U1L~-QCbBhSAaq~dg_40nEhSE~3W4zqr4Xlx~QONVOnYvS1~BQFWWhxtER~2kSJBy_FeR~KN7uxuR89w~Bd2L9ZBE8q~gVfGX_rH_Y~CkDjyRo6Vc~MMLd0YFt6B~r1vRjXa1Om~Cm1Eidma50~0xsDLqCEW6~8TfoJcOl_U~tgP8r-gOe_~_AKBg0O8RH~obb2YVQpYu~_GuOetFMMO~j3leh4reoN~S_37TFdOlL; __utma=235335808.1932906960.1650546160.1673772963.1677894528.14; __utmc=235335808; __utmt=1; __utmb=235335808.1.10.1677894528; __cf_bm=MgrVXlnIHMcKRTDnVl9j.hDcQwNSxZjbKt.pX9h6tgg-1677894530-0-ASeiRoJgOeA+N8g3fsNYnoi+rgMjF6aSCcJOi6dyiUn7ATjLsyiKJNWEgWdgdsWAM1xQphalJSrrhIzZsYvHitDPjrV4uHUp1sPKHQbavY+lYccB+qrflvPyJyZ/pnuvwMLyaCyjPnaAoPCLuSQZtz76ut7co5R6l0N4X455JIS+RW3wkA2eHboDPCnKKJWkhG86RIsbm7ovVC/GMkg35qU=; _ga_75BBYNYN9J=GS1.1.1677894529.15.0.1677894531.0.0.0; _im_vid=01GTN4XF62ANWRFB6QNPJSDNTF; _ga=GA1.2.1932906960.1650546160; _gid=GA1.2.1572612504.1677894532; QSI_S_ZN_5hF4My7Ad6VNNAi=v:0:0; cto_bundle=mpmEs19LWHJJRk00WjRoeGRWcW5hdUElMkYlMkZXU0MxbjJIcU9EUXFGVEhxWGp5YUtLVnZZRldHUGJETG5aM21zaUJCbm1qQ200cWZuVUluRVZpSzY2a3FmekFZZG9JSlh2cmFwZkFGUkVVdlNDVkdaSHBBeUNsV0ZQc01lJTJCJTJCeDJ6NDBXRU1lR3ZjU25NOVNRaTclMkZzT0ljNUZ1ejlRJTNEJTNE"
# }
# headerPixiv2={
#     "referer": "https://www.pixiv.net/",
#     "user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36",
#     "Cookie":"__utma=235335808.1530758504.1677897968.1678029850.1678086869.5; __utmb=235335808.2.10.1678086869; __utmc=235335808; __utmv=235335808.|2=login%20ever=yes=1^3=plan=normal=1^5=gender=female=1^6=user_id=52711564=1^9=p_ab_id=7=1^10=p_ab_id_2=7=1^11=lang=en=1; __utmz=235335808.1677897968.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); _ga=GA1.1.1586088352.1677897969; _ga_75BBYNYN9J=GS1.1.1678086870.5.1.1678086905.0.0.0; cto_bundle=VgDL3F9XNEprVHpHU1gyc1RTbTB0V1lUb2hodmZ0MDJXVDhmUk1FQVVIbnZrR3FsVzNqWU9zNGFhVU9raW4yazNaa1dXazYlMkZiTWZEcnJyVU9naXFoZkZDd1djYXRtak1JbElTMEZEJTJGSWNpWDIxQmtPY3pRQk9kJTJGcktRRkpmZGxqZXppelBYTUpiQlVsdjRubURmOVY0c0w0RDclMkJDbjk5eGNjVVV5SHk4YllMcnBVWSUzRA; _im_vid=01GTN86E58AHFS2K2FDCGPYMZ7; _fbp=fb.1.1677897969197.1608136691; __cf_bm=Gm3cZBc19usPaXgPtBeWPFla33iZuEmaTSCcF2chFF8-1678086869-0-ATZj4sEq/2uwhnMW/PdPS0qdB7yxrmgV9PqtZMrJtvIiY+JipLGdTlCpC+rcU0GjBtnva6LI9R7glMLCZzbAvSAZWalZ3cbMG38eQCVxPgYANzfBIrngDiClsGMbVez0h3FtVZaT3m4O9iX23dIrWxmac//ErX8Tz5EUljawCdLAXAVkJH8i0gaFi2dMbWL1+8oBi9KakuD3+WWqaGwIPPM=; __utmt=1; PHPSESSID=52711564_vIwvAQ2YkI72mvL1cLt3M4ONORPeDCJX; a_type=0; b_type=2; privacy_policy_agreement=0; privacy_policy_notification=0; tag_view_ranking=ziiAzr_h04~Ie2c51_4Sp~DlTwYHcEzf~_EOd7bsGyl~OUF2gvwPef~gpglyfLkWs~Jnl0FHh-hw~Ekc63fSc_I~Iw8-CwcVaN~tgP8r-gOe_~azESOjmQSV~R8xToL-qLS~2DaJ4fWIqC~jmKo5KQfln~0xsDLqCEW6~Lt-oEicbBr~075UdZvy3U~KMpT0re7Sq~VLDgZNuX1x; c_type=21; _gcl_au=1.1.1217602423.1677898017; login_ever=yes; QSI_S_ZN_5hF4My7Ad6VNNAi=v:0:0; _ga_MZ1NL4PHH0=GS1.1.1677897985.1.0.1677897989.0.0.0; device_token=ce25e43e3032641a13f9e3b7b7976817; yuid_b=c3aCUA; first_visit_datetime_pc=2023-03-04+11%3A46%3A05; d_type=2%2C7; p_ab_d_id=774148512; p_ab_id=7; p_ab_id_2=7",
#     "Cache-Control":"no-cache"
# }
# headerPixiv3={
#     "referer": "https://www.pixiv.net/",
#     "user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36",
#     "Cookie":"_ga=GA1.1.1628371401.1678087177; _ga_75BBYNYN9J=GS1.1.1678087177.1.1.1678087421.0.0.0; __utma=235335808.1628371401.1678087177.1678087177.1678087177.1; __utmb=235335808.20.9.1678087380034; __utmc=235335808; __utmv=235335808.|2=login%20ever=yes=1^3=plan=normal=1^5=gender=female=1^6=user_id=56599660=1^9=p_ab_id=1=1^10=p_ab_id_2=4=1^11=lang=zh=1; __utmz=235335808.1678087177.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); cto_bundle=l8ejlV95U3ZhQk9IbkJLTW51WEZGZGxzclBWZVNuaFRwWER4S2xmSFY4REUzNnFSUXI1NlpXcU9EJTJCc1ZKTFdDNEw2Znl2akFISWRCRnlWTmNaNEFCWFVuOHNCWSUyRld3eWxUcE1qRSUyQlo5VUo2NXZBOEhyUFczMW9BU1FtUlpscG81JTJCOWhVZnJESE15SnhURGttVW4lMkZodThvREo4OHIlMkZxbWdrb2hkNHdrZHNDT2JQcW8lM0Q; _im_vid=01GTTWN0ZN6N19GMT024XPE0NF; _fbp=fb.1.1678087178338.753884286; tag_view_ranking=_EOd7bsGyl~sAwDH104z0~ziiAzr_h04~OUF2gvwPef~fSe-AJMQbS~y1uQ_l2kjR~KWwTZs8wLi~MnGbHeuS94; PHPSESSID=56599660_tV7tfK33A6tOgPRcL5qOfrRTTPCB2sT2; a_type=0; b_type=2; privacy_policy_agreement=0; privacy_policy_notification=0; user_language=zh; c_type=21; _gcl_au=1.1.1125070010.1678087316; login_ever=yes; QSI_S_ZN_5hF4My7Ad6VNNAi=v:0:0; _ga_MZ1NL4PHH0=GS1.1.1678087181.1.0.1678087187.0.0.0; device_token=b03a9394e6d3e1b7e28e674fce001ad2; _gid=GA1.2.143246197.1678087182; __cf_bm=7N_owTpt97GZkGQqK5tipbpWQAL3WaaXivpRWBNvbGE-1678087177-0-AZRksHGiJ/CwtFFa/Lm4D+nZuRUzpgqbZbiAzTCZalcIUtOcwAFpYXoJLO7OrPUxLrKSSz/4VTlnLohnB6GX24PdJJ++zb7c9JpfsqVBhG6HXI4Mbogv/Li0Wdijfe+Q0OQYK2nUr5PQeu59L2SuyKICoPseR0Mc37mCv6WkXdf5JgMdnJ0D7UX0CmpTSw6cceXTI4IlomunMEk8bBUUNLk=; __utmt=1; p_ab_d_id=527967433; p_ab_id=1; p_ab_id_2=4; first_visit_datetime_pc=2023-03-06+16%3A19%3A35; yuid_b=MgIIcDc",
#     "Cache-Control":"no-cache"
# }
# request=requests.get('https://www.pixiv.net/ajax/search/artworks/Lumine?word=Lumine&order=date_d&mode=all&p=1&s_mode=s_tag_full&type=all&lang=zh&version=1bb9c95cd9cbc108a16ddf9fea198f3210ac5053 ',headers=headerPixiv3).text
# content=json.loads(request)
# print(content)
# contentList=re.findall("(\{'id': '\d+', 'title':.*?'tags'.*?userName.*?},)",str(content))
# total=int(re.search("'total': (\d+), ",str(content)).group(1))
# print('\n'.join(contentList))
# print(total)
